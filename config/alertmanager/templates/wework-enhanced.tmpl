{{ define "wework.title" }}
{{ if eq .Status "firing" }}ğŸ”¥ å‘Šè­¦è§¦å‘{{ else }}âœ… å‘Šè­¦æ¢å¤{{ end }} - {{ .Labels.alertname }}
{{ end }}

{{ define "wework.content" }}
{{ if eq .Status "firing" }}ğŸ”¥ å‘Šè­¦è§¦å‘{{ else }}âœ… å‘Šè­¦æ¢å¤{{ end }}

**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**å‘Šè­¦æ•°é‡:** {{ len .Alerts }}
**è§¦å‘æ—¶é—´:** {{ (index .Alerts 0).StartsAt.Format "2006-01-02 15:04:05" }}

---

{{ range .Alerts }}
### ğŸ“Œ {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**æ‘˜è¦:** {{ .Annotations.summary }}

**æè¿°:**
{{ .Annotations.description }}

{{ if .Annotations.prediction_value }}
**ğŸ”® é¢„æµ‹ä¿¡æ¯:**
> é¢„æµ‹å€¼: {{ .Annotations.prediction_value }}
> å½“å‰å€¼: {{ .Annotations.current_value }}
> é¢„æµ‹è´¨é‡: {{ .Annotations.prediction_quality }}
> é¢„æµ‹ç½®ä¿¡åº¦: {{ .Annotations.prediction_confidence }}

{{ end }}**æ ‡ç­¾:**
{{ range $key, $value := .Labels }}- {{ $key }}: {{ $value }}
{{ end }}

---

{{ end }}

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000)
{{ end }}

{{ define "wework.card.content" }}
{
  "msgtype": "template_card",
  "template_card": {
    "card_type": "text_notice",
    "source": {
      "desc": "ç›‘æ§ç³»ç»Ÿ",
      "desc_color": 0
    },
    "main_title": {
      "title": "{{ if eq .Status "firing" }}ğŸ”¥ å‘Šè­¦è§¦å‘{{ else }}âœ… å‘Šè­¦æ¢å¤{{ end }}",
      "desc": "{{ .Labels.alertname }}"
    },
    "emphasis_content": {
      "title": "å‘Šè­¦çº§åˆ«: {{ .Labels.severity }}",
      "desc": "å‘Šè­¦æ•°é‡: {{ len .Alerts }}"
    },
    "quote_area": {
      "type": 1,
      "url": "http://localhost:3000/d/alerts",
      "title": "ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…",
      "quote_text": "è§¦å‘æ—¶é—´: {{ (index .Alerts 0).StartsAt.Format "2006-01-02 15:04:05" }}"
    },
    "sub_title_text": "{{ (index .Alerts 0).Annotations.summary }}",
    "horizontal_content_list": [
      {
        "keyname": "å®ä¾‹",
        "value": "{{ (index .Alerts 0).Labels.instance }}"
      },
      {
        "keyname": "å‘Šè­¦çº§åˆ«",
        "value": "{{ .Labels.severity }}"
      }
    ],
    "jump_list": [
      {
        "type": 1,
        "url": "http://localhost:3000/d/alerts",
        "title": "æŸ¥çœ‹è¯¦æƒ…"
      },
      {
        "type": 1,
        "url": "http://localhost:3000",
        "title": "Grafana"
      }
    ],
    "card_action": {
      "type": 1,
      "url": "http://localhost:3000/d/alerts"
    }
  }
}
{{ end }}

{{ define "wework.predictive.content" }}
## ğŸ”® é¢„æµ‹æ€§å‘Šè­¦ - {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**é¢„æµ‹æ—¶é—´çª—å£:** {{ .Annotations.prediction_horizon }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ“Š é¢„æµ‹è¯¦æƒ…

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å½“å‰å€¼ | {{ .Annotations.current_value }} |
| é¢„æµ‹å€¼ | **{{ .Annotations.prediction_value }}** |
| é¢„æµ‹è´¨é‡ | {{ .Annotations.prediction_quality }} |
| é¢„æµ‹ç¨³å®šæ€§ | {{ .Annotations.prediction_stability }} |
| é¢„æµ‹ç½®ä¿¡åº¦ | {{ .Annotations.prediction_confidence }} |
| é¢„æµ‹æ–¹æ³• | {{ .Annotations.prediction_method }} |

---

### ğŸ“ˆ å¤šæ¨¡å‹é¢„æµ‹å¯¹æ¯”

| æ¨¡å‹ | é¢„æµ‹å€¼ | å‡†ç¡®åº¦ |
|------|--------|--------|
| çº¿æ€§å›å½’ | {{ .Annotations.linear_prediction }} | {{ .Annotations.linear_accuracy }} |
| å­£èŠ‚æ€§é¢„æµ‹ | {{ .Annotations.seasonal_prediction }} | {{ .Annotations.seasonal_accuracy }} |
| å¤šæŒ‡æ ‡é¢„æµ‹ | {{ .Annotations.multivariate_prediction }} | {{ .Annotations.multivariate_accuracy }} |
| èåˆé¢„æµ‹ | {{ .Annotations.ensemble_prediction }} | {{ .Annotations.ensemble_accuracy }} |
| **è‡ªé€‚åº”é¢„æµ‹** | **{{ .Annotations.prediction_value }}** | **{{ .Annotations.adaptive_accuracy }}** |

---

### ğŸ“… å†å²å¯¹æ¯”

| æ—¶é—´æ®µ | æ•°å€¼ |
|--------|------|
| æ˜¨å¤©åŒæœŸ | {{ .Annotations.history_yesterday }} |
| ä¸Šå‘¨åŒæœŸ | {{ .Annotations.history_last_week }} |
| 7 å¤©åŸºçº¿ | {{ .Annotations.history_baseline_7d }} |
| å†å²åå·® | {{ .Annotations.deviation_from_history }} |

---

### ğŸ”„ å­£èŠ‚æ€§åˆ†æ

| åˆ†é‡ | å€¼ |
|------|-----|
| è¶‹åŠ¿åˆ†é‡ | {{ .Annotations.seasonal_trend }} |
| å­£èŠ‚æ€§åˆ†é‡ | {{ .Annotations.seasonal_seasonal }} |
| æ®‹å·®åˆ†é‡ | {{ .Annotations.seasonal_residual }} |
| æ¯æ—¥åŸºçº¿ | {{ .Annotations.seasonal_daily_baseline }} |

---

### ğŸ¯ å»ºè®®æ“ä½œ

{{ .Annotations.auto_mitigation_suggestions }}

---

### ğŸ›¡ï¸ é¢„é˜²æªæ–½

{{ .Annotations.preventive_measures }}

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}

{{ define "wework.predictive.card" }}
{
  "msgtype": "template_card",
  "template_card": {
    "card_type": "text_notice",
    "source": {
      "desc": "é¢„æµ‹æ€§ç›‘æ§ç³»ç»Ÿ",
      "desc_color": 0
    },
    "main_title": {
      "title": "ğŸ”® é¢„æµ‹æ€§å‘Šè­¦",
      "desc": "{{ .Labels.alertname }}"
    },
    "emphasis_content": {
      "title": "å®ä¾‹: {{ .Labels.instance }}",
      "desc": "é¢„æµ‹å€¼: {{ .Annotations.prediction_value }} | ç½®ä¿¡åº¦: {{ .Annotations.prediction_confidence }}"
    },
    "quote_area": {
      "type": 1,
      "url": "http://localhost:3000/d/alerts",
      "title": "ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…",
      "quote_text": "é¢„æµ‹æ—¶é—´çª—å£: {{ .Annotations.prediction_horizon }}"
    },
    "sub_title_text": "{{ .Annotations.summary }}",
    "horizontal_content_list": [
      {
        "keyname": "å½“å‰å€¼",
        "value": "{{ .Annotations.current_value }}"
      },
      {
        "keyname": "é¢„æµ‹å€¼",
        "value": "{{ .Annotations.prediction_value }}"
      },
      {
        "keyname": "é¢„æµ‹è´¨é‡",
        "value": "{{ .Annotations.prediction_quality }}"
      },
      {
        "keyname": "é¢„æµ‹æ–¹æ³•",
        "value": "{{ .Annotations.prediction_method }}"
      }
    ],
    "jump_list": [
      {
        "type": 1,
        "url": "http://localhost:3000/d/alerts",
        "title": "æŸ¥çœ‹è¯¦æƒ…"
      },
      {
        "type": 1,
        "url": "http://localhost:3000",
        "title": "Grafana"
      },
      {
        "type": 1,
        "url": "{{ .Annotations.runbook_url }}",
        "title": "è¿ç»´æ‰‹å†Œ"
      }
    ],
    "card_action": {
      "type": 1,
      "url": "http://localhost:3000/d/alerts"
    }
  }
}
{{ end }}

{{ define "wework.rootcause.content" }}
## ğŸ”´ã€æ ¹å› å‘Šè­¦ã€‘{{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ¯ æ ¹å› åˆ†æ

{{ .Annotations.description }}

---

### ğŸ“Š å½±å“èŒƒå›´

| å½±å“é¡¹ | æ•°é‡ |
|--------|------|
| å—å½±å“è®¾å¤‡ | {{ .Annotations.affected_devices }} |
| å—å½±å“è™šæ‹Ÿæœº | {{ .Annotations.affected_vms }} |
| å—å½±å“ç”¨æˆ· | {{ .Annotations.affected_users }} |

---

### ğŸ”— æ‹“æ‰‘é“¾è·¯

```
{{ .Annotations.topology_chain }}
```

---

### ğŸš« è¢«æŠ‘åˆ¶çš„å‘Šè­¦

- æ¥å…¥äº¤æ¢æœºå‘Šè­¦: {{ .Annotations.suppressed_switches }} æ¡
- æœåŠ¡å™¨å‘Šè­¦: {{ .Annotations.suppressed_servers }} æ¡
- ç½‘ç»œå»¶è¿Ÿå‘Šè­¦: {{ .Annotations.suppressed_network }} æ¡

---

### ğŸ¯ å¤„ç†æ­¥éª¤

{{ .Annotations.resolution_steps }}

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}

{{ define "wework.metricslogs.content" }}
## ğŸ”— Metrics + Logs å…³è”å‘Šè­¦ - {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ“Š æŒ‡æ ‡ä¿¡æ¯

{{ .Annotations.metric_summary }}

---

### ğŸ“ æ—¥å¿—æŸ¥è¯¢

```logql
{{ .Annotations.log_query }}
```

---

### ğŸ¯ å¤„ç†æ­¥éª¤

{{ .Annotations.resolution_steps }}

---

### ğŸ”— å¿«é€Ÿé“¾æ¥

- [æŸ¥çœ‹æ—¥å¿—](http://localhost:3000/d/logs-explorer?expr={{ .Annotations.log_query_encoded }})
- [æŸ¥çœ‹æŒ‡æ ‡](http://localhost:3000/d/metrics?var-instance={{ .Labels.instance }})
- [æ‹“æ‰‘å›¾](http://localhost:3000/d/network-topology)

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}