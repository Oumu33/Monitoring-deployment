{{ define "dingtalk.title" }}
{{ if eq .Status "firing" }}ğŸ”¥ å‘Šè­¦è§¦å‘{{ else }}âœ… å‘Šè­¦æ¢å¤{{ end }} - {{ .Labels.alertname }}
{{ end }}

{{ define "dingtalk.content" }}
## {{ if eq .Status "firing" }}ğŸ”¥ å‘Šè­¦è§¦å‘{{ else }}âœ… å‘Šè­¦æ¢å¤{{ end }}

**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**å‘Šè­¦æ•°é‡:** {{ len .Alerts }}
**è§¦å‘æ—¶é—´:** {{ (index .Alerts 0).StartsAt.Format "2006-01-02 15:04:05" }}

---

{{ range .Alerts }}
### ğŸ“Œ {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**æ‘˜è¦:** {{ .Annotations.summary }}

**æè¿°:**
{{ .Annotations.description }}

{{ if .Annotations.prediction_value }}
**ğŸ”® é¢„æµ‹ä¿¡æ¯:**
> é¢„æµ‹å€¼: {{ .Annotations.prediction_value }}
> å½“å‰å€¼: {{ .Annotations.current_value }}
> é¢„æµ‹è´¨é‡: {{ .Annotations.prediction_quality }}
> é¢„æµ‹ç½®ä¿¡åº¦: {{ .Annotations.prediction_confidence }}

{{ end }}**æ ‡ç­¾:**
{{ range $key, $value := .Labels }}- {{ $key }}: {{ $value }}
{{ end }}

---

{{ end }}

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000)
{{ end }}

{{ define "dingtalk.predictive.content" }}
## ğŸ”® é¢„æµ‹æ€§å‘Šè­¦ - {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**é¢„æµ‹æ—¶é—´çª—å£:** {{ .Annotations.prediction_horizon }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ“Š é¢„æµ‹è¯¦æƒ…

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| å½“å‰å€¼ | {{ .Annotations.current_value }} |
| é¢„æµ‹å€¼ | **{{ .Annotations.prediction_value }}** |
| é¢„æµ‹è´¨é‡ | {{ .Annotations.prediction_quality }} |
| é¢„æµ‹ç¨³å®šæ€§ | {{ .Annotations.prediction_stability }} |
| é¢„æµ‹ç½®ä¿¡åº¦ | {{ .Annotations.prediction_confidence }} |
| é¢„æµ‹æ–¹æ³• | {{ .Annotations.prediction_method }} |

---

### ğŸ“ˆ å¤šæ¨¡å‹é¢„æµ‹å¯¹æ¯”

| æ¨¡å‹ | é¢„æµ‹å€¼ | å‡†ç¡®åº¦ |
|------|--------|--------|
| çº¿æ€§å›å½’ | {{ .Annotations.linear_prediction }} | {{ .Annotations.linear_accuracy }} |
| å­£èŠ‚æ€§é¢„æµ‹ | {{ .Annotations.seasonal_prediction }} | {{ .Annotations.seasonal_accuracy }} |
| å¤šæŒ‡æ ‡é¢„æµ‹ | {{ .Annotations.multivariate_prediction }} | {{ .Annotations.multivariate_accuracy }} |
| èåˆé¢„æµ‹ | {{ .Annotations.ensemble_prediction }} | {{ .Annotations.ensemble_accuracy }} |
| **è‡ªé€‚åº”é¢„æµ‹** | **{{ .Annotations.prediction_value }}** | **{{ .Annotations.adaptive_accuracy }}** |

---

### ğŸ“… å†å²å¯¹æ¯”

| æ—¶é—´æ®µ | æ•°å€¼ |
|--------|------|
| æ˜¨å¤©åŒæœŸ | {{ .Annotations.history_yesterday }} |
| ä¸Šå‘¨åŒæœŸ | {{ .Annotations.history_last_week }} |
| 7 å¤©åŸºçº¿ | {{ .Annotations.history_baseline_7d }} |
| å†å²åå·® | {{ .Annotations.deviation_from_history }} |

---

### ğŸ”„ å­£èŠ‚æ€§åˆ†æ

| åˆ†é‡ | å€¼ |
|------|-----|
| è¶‹åŠ¿åˆ†é‡ | {{ .Annotations.seasonal_trend }} |
| å­£èŠ‚æ€§åˆ†é‡ | {{ .Annotations.seasonal_seasonal }} |
| æ®‹å·®åˆ†é‡ | {{ .Annotations.seasonal_residual }} |
| æ¯æ—¥åŸºçº¿ | {{ .Annotations.seasonal_daily_baseline }} |

---

### ğŸ¯ å»ºè®®æ“ä½œ

{{ .Annotations.auto_mitigation_suggestions }}

---

### ğŸ›¡ï¸ é¢„é˜²æªæ–½

{{ .Annotations.preventive_measures }}

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}

{{ define "dingtalk.rootcause.content" }}
## ğŸ”´ã€æ ¹å› å‘Šè­¦ã€‘{{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ¯ æ ¹å› åˆ†æ

{{ .Annotations.description }}

---

### ğŸ“Š å½±å“èŒƒå›´

| å½±å“é¡¹ | æ•°é‡ |
|--------|------|
| å—å½±å“è®¾å¤‡ | {{ .Annotations.affected_devices }} |
| å—å½±å“è™šæ‹Ÿæœº | {{ .Annotations.affected_vms }} |
| å—å½±å“ç”¨æˆ· | {{ .Annotations.affected_users }} |

---

### ğŸ”— æ‹“æ‰‘é“¾è·¯

```
{{ .Annotations.topology_chain }}
```

---

### ğŸš« è¢«æŠ‘åˆ¶çš„å‘Šè­¦

- æ¥å…¥äº¤æ¢æœºå‘Šè­¦: {{ .Annotations.suppressed_switches }} æ¡
- æœåŠ¡å™¨å‘Šè­¦: {{ .Annotations.suppressed_servers }} æ¡
- ç½‘ç»œå»¶è¿Ÿå‘Šè­¦: {{ .Annotations.suppressed_network }} æ¡

---

### ğŸ¯ å¤„ç†æ­¥éª¤

{{ .Annotations.resolution_steps }}

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}

{{ define "dingtalk.metricslogs.content" }}
## ğŸ”— Metrics + Logs å…³è”å‘Šè­¦ - {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ“Š æŒ‡æ ‡ä¿¡æ¯

{{ .Annotations.metric_summary }}

---

### ğŸ“ æ—¥å¿—æŸ¥è¯¢

```logql
{{ .Annotations.log_query }}
```

---

### ğŸ¯ å¤„ç†æ­¥éª¤

{{ .Annotations.resolution_steps }}

---

### ğŸ”— å¿«é€Ÿé“¾æ¥

- [æŸ¥çœ‹æ—¥å¿—](http://localhost:3000/d/logs-explorer?expr={{ .Annotations.log_query_encoded }})
- [æŸ¥çœ‹æŒ‡æ ‡](http://localhost:3000/d/metrics?var-instance={{ .Labels.instance }})
- [æ‹“æ‰‘å›¾](http://localhost:3000/d/network-topology)

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}

{{ define "dingtalk.hardware.content" }}
## âš™ï¸ ç¡¬ä»¶å‘Šè­¦ - {{ .Labels.alertname }}

**å®ä¾‹:** {{ .Labels.instance }}
**å‚å•†:** {{ .Labels.vendor }}
**å‹å·:** {{ .Labels.model }}
**å‘Šè­¦çº§åˆ«:** {{ .Labels.severity }}
**è§¦å‘æ—¶é—´:** {{ .StartsAt.Format "2006-01-02 15:04:05" }}

---

### ğŸ”§ ç¡¬ä»¶è¯¦æƒ…

| å±æ€§ | å€¼ |
|------|-----|
| åºåˆ—å· | {{ .Labels.serial_number }} |
| æ•…éšœç»„ä»¶ | {{ .Labels.failed_component }} |
| å½“å‰çŠ¶æ€ | {{ .Annotations.current_status }} |

---

### ğŸ“Š å½±å“èŒƒå›´

| å½±å“é¡¹ | æ•°é‡ |
|--------|------|
| å—å½±å“è™šæ‹Ÿæœº | {{ .Annotations.affected_vms }} |
| å—å½±å“æœåŠ¡ | {{ .Annotations.affected_services }} |

---

### ğŸ¯ å¤„ç†æ­¥éª¤

{{ .Annotations.resolution_steps }}

---

### ğŸ“‹ æ ‡ç­¾

{{ range $key, $value := .Labels }}- **{{ $key }}:** {{ $value }}
{{ end }}

---

ğŸ”— [æŸ¥çœ‹è¯¦æƒ…](http://localhost:3000/d/alerts) | ğŸ“Š [Grafana](http://localhost:3000) | ğŸ“– [è¿ç»´æ‰‹å†Œ]({{ .Annotations.runbook_url }})
{{ end }}