# 简化配置示例 - 快速开始

[agent]
  interval = "10s"
  flush_interval = "10s"

# Cisco 核心路由器示例
[[inputs.gnmi]]
  addresses = ["192.168.1.100:57400"]
  username = "${GNMI_USERNAME}"
  password = "${GNMI_PASSWORD}"

  enable_tls = true
  insecure_skip_verify = true
  encoding = "proto"
  redial = "20s"

  [inputs.gnmi.tags]
    device_type = "router"
    vendor = "cisco"

  # 接口流量统计
  [[inputs.gnmi.subscription]]
    name = "interface_counters"
    origin = "openconfig"
    path = "/interfaces/interface/state/counters"
    subscription_mode = "sample"
    sample_interval = "10s"

  # CPU 使用率
  [[inputs.gnmi.subscription]]
    name = "cpu"
    origin = "openconfig"
    path = "/components/component/cpu/utilization/state"
    subscription_mode = "sample"
    sample_interval = "5s"

# 输出到 VictoriaMetrics
[[outputs.http]]
  url = "http://victoriametrics:8428/api/v1/write"
  data_format = "prometheusremotewrite"
  timeout = "10s"
